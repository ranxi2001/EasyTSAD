
æ ¹æ®æ‚¨æä¾›çš„ä»£ç ï¼Œæˆ‘æ¥è¯¦ç»†è§£é‡ŠMTS dataæ ¼å¼ï¼š

## ğŸ” MTS Dataæ ¼å¼è§£æ

### **MTS = Multivariate Time Seriesï¼ˆå¤šå˜é‡æ—¶é—´åºåˆ—ï¼‰**

## ğŸ“Š æ•°æ®ç»“æ„

### **1. MTSDataç±»çš„æ ¸å¿ƒå±æ€§ï¼š**

```python
class MTSData:
    def __init__(self, train, valid, test, train_label, test_label, valid_label, info):
        self.train = train          # è®­ç»ƒé›†æ•°æ®
        self.valid = valid          # éªŒè¯é›†æ•°æ®  
        self.test = test            # æµ‹è¯•é›†æ•°æ®
        self.train_label = train_label    # è®­ç»ƒé›†æ ‡ç­¾
        self.test_label = test_label      # æµ‹è¯•é›†æ ‡ç­¾
        self.valid_label = valid_label    # éªŒè¯é›†æ ‡ç­¾
        self.info = info            # æ•°æ®é›†ä¿¡æ¯
```

### **2. æ•°æ®ç»´åº¦è¯´æ˜ï¼š**

- **train/valid/test**: `shape = (æ—¶é—´æ­¥æ•°, ç‰¹å¾æ•°é‡)`
  - ä¾‹å¦‚ï¼š`(22784, 38)` è¡¨ç¤º22784ä¸ªæ—¶é—´æ­¥ï¼Œæ¯ä¸ªæ—¶é—´æ­¥æœ‰38ä¸ªç‰¹å¾
- **labels**: `shape = (æ—¶é—´æ­¥æ•°,)` 
  - äºŒè¿›åˆ¶æ ‡ç­¾ï¼š0=æ­£å¸¸ï¼Œ1=å¼‚å¸¸

## ğŸ†š MTS vs UTS å¯¹æ¯”

| ç‰¹å¾ | **MTS (å¤šå˜é‡)** | **UTS (å•å˜é‡)** |
|------|------------------|------------------|
| **å˜é‡æ•°é‡** | å¤šä¸ªç‰¹å¾ (å¦‚38ä¸ª) | å•ä¸ªç‰¹å¾ |
| **æ•°æ®å½¢çŠ¶** | `(time_steps, features)` | `(time_steps,)` |
| **åº”ç”¨åœºæ™¯** | æœºå™¨ç›‘æ§ã€é‡‘èå¸‚åœº | æ¸©åº¦ã€è‚¡ä»·å•æŒ‡æ ‡ |
| **å¤æ‚åº¦** | é«˜ï¼ˆéœ€è€ƒè™‘ç‰¹å¾é—´å…³ç³»ï¼‰ | ä½ |

## ğŸ­ å®é™…ä¾‹å­ï¼šæœºå™¨ç›‘æ§æ•°æ®

ä»¥æ‚¨çš„machine-1æ•°æ®ä¸ºä¾‹ï¼š

```python
# å‡è®¾shapeä¸º(22784, 38)
train_data = [
    # æ—¶é—´æ­¥1: [æ¸©åº¦, å‹åŠ›, æŒ¯åŠ¨, ç”µæµ, ..., å…¶ä»–34ä¸ªä¼ æ„Ÿå™¨]
    [25.3, 1.2, 0.05, 2.1, ..., sensor_38_value],
    # æ—¶é—´æ­¥2:
    [25.5, 1.3, 0.06, 2.0, ..., sensor_38_value],
    # ...
    # æ—¶é—´æ­¥22784:
    [26.1, 1.1, 0.04, 2.2, ..., sensor_38_value]
]

train_label = [0, 0, 0, 1, 1, 0, ...]  # å¯¹åº”æ¯ä¸ªæ—¶é—´æ­¥çš„å¼‚å¸¸æ ‡ç­¾
```

## ğŸ”§ æ•°æ®é¢„å¤„ç†æ–¹æ³•

MTSDataæä¾›äº†ä¸“é—¨çš„é¢„å¤„ç†ï¼š

### **1. Z-scoreæ ‡å‡†åŒ–ï¼š**
```python
def z_score_norm(self):
    # å¯¹æ¯ä¸ªç‰¹å¾ç‹¬ç«‹è¿›è¡Œæ ‡å‡†åŒ–
    for i in range(n_features):
        scaler = StandardScaler().fit(self.train[:, i])
        self.train[:, i] = scaler.transform(self.train[:, i])
```

### **2. MinMaxå½’ä¸€åŒ–ï¼š**
```python
def min_max_norm(self, feature_range=(0,1)):
    # å¯¹æ¯ä¸ªç‰¹å¾ç‹¬ç«‹è¿›è¡Œå½’ä¸€åŒ–åˆ°æŒ‡å®šèŒƒå›´
```

## ğŸ“‚ æ–‡ä»¶ç»„ç»‡ç»“æ„

```
datasets/
â”œâ”€â”€ MTS/
â”‚   â”œâ”€â”€ machine-1/
â”‚   â”‚   â”œâ”€â”€ train.npy      # è®­ç»ƒæ•°æ® (time_steps, features)
â”‚   â”‚   â”œâ”€â”€ train_label.npy # è®­ç»ƒæ ‡ç­¾ (time_steps,)
â”‚   â”‚   â”œâ”€â”€ test.npy       # æµ‹è¯•æ•°æ®
â”‚   â”‚   â”œâ”€â”€ test_label.npy # æµ‹è¯•æ ‡ç­¾
â”‚   â”‚   â””â”€â”€ info.json      # å…ƒä¿¡æ¯
```

## ğŸ¯ ä¸ºä»€ä¹ˆç”¨MTSï¼Ÿ

1. **å¤šç»´ç›‘æ§**ï¼šåŒæ—¶ç›‘æ§å¤šä¸ªä¼ æ„Ÿå™¨/æŒ‡æ ‡
2. **å…³è”åˆ†æ**ï¼šæ•è·ç‰¹å¾é—´çš„ç›¸äº’ä¾èµ–
3. **å…¨é¢è¯Šæ–­**ï¼šå•ä¸€å¼‚å¸¸å¯èƒ½åœ¨å¤šä¸ªç»´åº¦ä½“ç°
4. **æé«˜ç²¾åº¦**ï¼šå¤šå˜é‡ä¿¡æ¯æ¯”å•å˜é‡æ›´ä¸°å¯Œ

## ğŸ’¡ åœ¨TimeMixerä¸­çš„åº”ç”¨

```python
# MTSDataè‡ªåŠ¨å¤„ç†å¤šå˜é‡ç‰¹å¾
self.config.n_features = train_data.shape[1]  # 38ä¸ªç‰¹å¾

# æ¨¡å‹éœ€è¦å¤„ç†å¤šç»´è¾“å…¥
def forward(self, x):
    # x: (batch, seq_len, n_features) = (32, 128, 38)
    # æ¯ä¸ªæ ·æœ¬åŒ…å«128ä¸ªæ—¶é—´æ­¥ï¼Œæ¯ä¸ªæ—¶é—´æ­¥38ä¸ªç‰¹å¾
```

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ‚¨çš„TimeMixerèƒ½å¤Ÿå¤„ç†machine-1çš„38ç»´ä¼ æ„Ÿå™¨æ•°æ®ï¼Œè¿›è¡Œå¤šå˜é‡æ—¶é—´åºåˆ—å¼‚å¸¸æ£€æµ‹ï¼
